<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Interfaces · OpticSim.jl</title><link href="https://fonts.googleapis.com/css?family=Lato|Roboto+Mono" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.0/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.0/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.0/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.11.1/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL=".."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../assets/documenter.js"></script><script src="../siteinfo.js"></script><script src="../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../assets/themeswap.js"></script><link href="../assets/logo.svg" rel="icon" type="image/x-icon"/></head><body><div id="documenter"><nav class="docs-sidebar"><a class="docs-logo" href="../"><img class="docs-light-only" src="../assets/logo.svg" alt="OpticSim.jl logo"/><img class="docs-dark-only" src="../assets/logo-dark.svg" alt="OpticSim.jl logo"/></a><div class="docs-package-name"><span class="docs-autofit">OpticSim.jl</span></div><form class="docs-search" action="../search/"><input class="docs-search-query" id="documenter-search-query" name="q" type="text" placeholder="Search docs"/></form><ul class="docs-menu"><li><a class="tocitem" href="../">Home</a></li><li><a class="tocitem" href="../examples/">Examples</a></li><li><span class="tocitem">Geometry</span><ul><li><a class="tocitem" href="../basic_types/">Basic Types</a></li><li><a class="tocitem" href="../primitives/">Primitives</a></li><li><a class="tocitem" href="../csg/">CSG</a></li></ul></li><li><span class="tocitem">Optical</span><ul><li><a class="tocitem" href="../systems/">Systems</a></li><li><a class="tocitem" href="../emitters/">Emitters</a></li><li class="is-active"><a class="tocitem" href>Interfaces</a></li><li><a class="tocitem" href="../lenses/">Lenses</a></li></ul></li><li><a class="tocitem" href="../vis/">Visualization</a></li><li><a class="tocitem" href="../glasscat/">Glass Functions</a></li><li><a class="tocitem" href="../optimization/">Optimization</a></li><li><a class="tocitem" href="../cloud/">Cloud Execution</a></li><li><a class="tocitem" href="../notebooksutils/">Notebook utilities</a></li><li><a class="tocitem" href="../ref/">Reference</a></li><li><a class="tocitem" href="../roadmap/">Roadmap</a></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><nav class="breadcrumb"><ul class="is-hidden-mobile"><li><a class="is-disabled">Optical</a></li><li class="is-active"><a href>Interfaces</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Interfaces</a></li></ul></nav><div class="docs-right"><a class="docs-edit-link" href="https://github.com/microsoft/OpticSim.jl/blob/master/docs/src/interfaces.md" title="Edit on GitHub"><span class="docs-icon fab"></span><span class="docs-label is-hidden-touch">Edit on GitHub</span></a><a class="docs-settings-button fas fa-cog" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-sidebar-button fa fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a></div></header><article class="content" id="documenter-page"><h1 id="Optical-Interfaces"><a class="docs-heading-anchor" href="#Optical-Interfaces">Optical Interfaces</a><a id="Optical-Interfaces-1"></a><a class="docs-heading-anchor-permalink" href="#Optical-Interfaces" title="Permalink"></a></h1><p>Every <a href="../primitives/#OpticSim.Surface"><code>Surface</code></a> must have an <code>OpticalInterface</code> associated with it to defined the behavior of any ray when it intersects that surface.</p><article class="docstring"><header><a class="docstring-binding" id="OpticSim.OpticalInterface" href="#OpticSim.OpticalInterface"><code>OpticSim.OpticalInterface</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia">OpticalInterface{T&lt;:Real}</code></pre><p>Any subclass of OpticalInterface <strong>must</strong> implement the following:</p><pre><code class="language-julia">processintersection(opticalinterface::OpticalInterface{T}, point::SVector{N,T}, normal::SVector{N,T}, incidentray::OpticalRay{T,N}, temperature::T, pressure::T, ::Bool, firstray::Bool = false) -&gt; Tuple{SVector{N,T}, T, T}</code></pre><p>See documentation for <a href="#OpticSim.processintersection"><code>processintersection</code></a> for details.</p><p>These methods are also commonly implemented, but not essential:</p><pre><code class="language-julia">insidematerialid(i::OpticalInterface{T}) -&gt; OpticSim.GlassCat.AbstractGlass
outsidematerialid(i::OpticalInterface{T}) -&gt; OpticSim.GlassCat.AbstractGlass
reflectance(i::OpticalInterface{T}) -&gt; T
transmission(i::OpticalInterface{T}) -&gt; T</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/microsoft/OpticSim.jl/blob/6d517d51a4d9cbf449bcb9dea41294c7980bd3e8/src/Optical/OpticalInterface.jl#L5-L23">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="OpticSim.NullInterface" href="#OpticSim.NullInterface"><code>OpticSim.NullInterface</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia">NullInterface{T} &lt;: OpticalInterface{T}</code></pre><p>Interface which will be ignored totally by any rays, used only in construction of CSG objects.</p><pre><code class="language-julia">NullInterface(T = Float64)
NullInterface{T}()</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/microsoft/OpticSim.jl/blob/6d517d51a4d9cbf449bcb9dea41294c7980bd3e8/src/Optical/OpticalInterface.jl#L35-L44">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="OpticSim.FresnelInterface" href="#OpticSim.FresnelInterface"><code>OpticSim.FresnelInterface</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia">FresnelInterface{T} &lt;: OpticalInterface{T}</code></pre><p>Interface between two materials with behavior defined according to the <a href="https://en.wikipedia.org/wiki/Fresnel_equations">Fresnel equations</a>, with a specified reflectance and transmission. Assumes unpolarized light.</p><pre><code class="language-julia">FresnelInterface{T}(insidematerial, outsidematerial; reflectance = 0, transmission = 1, interfacemode = ReflectOrTransmit)</code></pre><p>The interfacemode can be used to trace rays deterministically. Valid values are defined in the InterfaceMode enum. Reflect means that all values are reflected, Transmit means that all values are transmitted. ReflectOrTransmit will randomly reflect and transmit rays with the distribution given by the reflection and transmission arguments. This is also the default. In all cases the power recorded with the ray is correctly updated. This can be used to fake sequential raytracing. For example a beamsplitter surface may be set to either Reflect or Transmit to switch between the two outgoing ray paths.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/microsoft/OpticSim.jl/blob/6d517d51a4d9cbf449bcb9dea41294c7980bd3e8/src/Optical/OpticalInterface.jl#L91-L107">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="OpticSim.ParaxialInterface" href="#OpticSim.ParaxialInterface"><code>OpticSim.ParaxialInterface</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia">ParaxialInterface{T} &lt;: OpticalInterface{T}</code></pre><p>Interface describing an idealized planar lens, i.e. one that is thin and with no aberrations.</p><p><strong>In general this interface should not be constructed directly, the <code>ParaxialLensEllipse</code> and <code>ParaxialLensRect</code> functions should be used to create a <a href="../lenses/#OpticSim.ParaxialLens"><code>ParaxialLens</code></a> object directly.</strong></p><pre><code class="language-julia">ParaxialInterface(focallength::T, centroid::SVector{3,T}, outsidematerial::Y)</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/microsoft/OpticSim.jl/blob/6d517d51a4d9cbf449bcb9dea41294c7980bd3e8/src/Optical/OpticalInterface.jl#L59-L69">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="OpticSim.ThinGratingInterface" href="#OpticSim.ThinGratingInterface"><code>OpticSim.ThinGratingInterface</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia">ThinGratingInterface{T} &lt;: OpticalInterface{T}</code></pre><p>Interface representing an idealized thin grating. <code>period</code> is in microns, <code>vector</code> should lie in the plane of the surface. Transmission and reflectance can be specified for an arbitrary number of orders up to 10, selected using the <code>maxorder</code> and <code>minorder</code> parameters. If <code>nothing</code> then <code>reflectance</code> is assumed to be <strong>0</strong> and <code>transmission</code> is assumed to be <strong>1</strong>.</p><pre><code class="language-julia">ThinGratingInterface(vector, period, insidematerial, outsidematerial; maxorder = 1, minorder = -1, reflectance = nothing, transmission = nothing)</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/microsoft/OpticSim.jl/blob/6d517d51a4d9cbf449bcb9dea41294c7980bd3e8/src/Optical/OpticalInterface.jl#L146-L156">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="OpticSim.HologramInterface" href="#OpticSim.HologramInterface"><code>OpticSim.HologramInterface</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia">HologramInterface{T} &lt;: OpticalInterface{T}</code></pre><p>Interface representing a <em>thick</em> hologram (though geometrically thin). The efficiency, <code>η</code>, is calculated using Kogelnik&#39;s coupled wave theory so is only valid for the first order. If the zero order is included then it has efficiency <code>1 - η</code>. Also assumes that the HOE was recorded under similar conditions to the playback conditions, <code>thickness</code> is in microns.</p><p><code>BeatState</code> arguments can be one of <code>ConvergingBeam</code>, <code>DivergingBeam</code> and <code>CollimatedBeam</code>. In the first two cases <code>signalpointordir</code> and <code>referencepointordir</code> are 3D point in global coordinate space. For <code>CollimatedBeam</code> they are normalized direction vectors.</p><p>For reference, see:</p><ul><li><em>Coupled Wave Theory for Thick Hologram Gratings</em> - H Kogelnik, 1995</li><li><em>Sequential and non-sequential simulation of volume holographic gratings</em> - M Kick et al, 2018</li></ul><pre><code class="language-julia">HologramInterface(signalpointordir::SVector{3,T}, signalbeamstate::BeamState, referencepointordir::SVector{3,T}, referencebeamstate::BeamState, recordingλ::T, thickness::T, beforematerial, substratematerial, aftermaterial, signalrecordingmaterial, referencerecordingmaterial, RImodulation::T, include0order  = false)</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/microsoft/OpticSim.jl/blob/6d517d51a4d9cbf449bcb9dea41294c7980bd3e8/src/Optical/OpticalInterface.jl#L207-L224">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="OpticSim.MultiHologramInterface" href="#OpticSim.MultiHologramInterface"><code>OpticSim.MultiHologramInterface</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia">MultiHologramInterface{T} &lt;: OpticalInterface{T}</code></pre><p>Interface to represent multiple overlapped <a href="#OpticSim.HologramInterface"><code>HologramInterface</code></a>s on a single surface. Each ray randomly selects an interface to use.</p><pre><code class="language-julia">MultiHologramInterface(interfaces::Vararg{HologramInterface{T}})
MultiHologramInterface(interfaces::Vector{HologramInterface{T}})</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/microsoft/OpticSim.jl/blob/6d517d51a4d9cbf449bcb9dea41294c7980bd3e8/src/Optical/OpticalInterface.jl#L264-L273">source</a></section></article><p>The critical behavior of each interface is defined in the <code>processintersection</code> function:</p><article class="docstring"><header><a class="docstring-binding" id="OpticSim.processintersection" href="#OpticSim.processintersection"><code>OpticSim.processintersection</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia">processintersection(opticalinterface::OpticalInterface{T}, point::SVector{N,T}, normal::SVector{N,T}, incidentray::OpticalRay{T,N}, temperature::T, pressure::T, ::Bool, firstray::Bool = false) -&gt; Tuple{SVector{N,T}, T, T}</code></pre><p>Processes an intersection of an <a href="../ref/#OpticSim.OpticalRay"><code>OpticalRay</code></a> with an <a href="#OpticSim.OpticalInterface"><code>OpticalInterface</code></a>, distinct behaviors must be implemented for each subclass of <code>OpticalInterface</code>.</p><p><code>point</code> is the 3D intersection point in global space, <code>normal</code> is the surface normal at the intersection point.</p><p>If <code>test</code> is true then the behavior of the ray should be deterministic. <code>firstray</code> indicates that this ray is the first segment of the trace and therefore the origin is not offset.</p><p>The values returned are the normalized direction of the ray after the intersection, the <em>instantaneous</em> power of the ray after the intersection and the optical path length of the ray up to the intersection.</p><p><code>nothing</code> is returned if the ray should stop here, in order to obtain the correct intensity on the detector through monte carlo integration <code>nothing</code> should be returned proportionally to create the correct power distribution. i.e. If the interface should modulate power to 76% then 24% of calls to this function should return <code>nothing</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/microsoft/OpticSim.jl/blob/6d517d51a4d9cbf449bcb9dea41294c7980bd3e8/src/Optical/Fresnel.jl#L111-L125">source</a></section></article></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../emitters/">« Emitters</a><a class="docs-footer-nextpage" href="../lenses/">Lenses »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> on <span class="colophon-date" title="Monday 24 May 2021 16:57">Monday 24 May 2021</span>. Using Julia version 1.6.1.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
